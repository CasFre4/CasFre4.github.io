function e(e){return e&&e.__esModule?e.default:e}var t,n=globalThis,r={},i={},a=n.parcelRequire55c9;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},n.parcelRequire55c9=a),a.register;var s=a("j17NA"),l={value:()=>{}};function o(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw Error("illegal type: "+e);r[e]=[]}return new u(r)}function u(e){this._=e}function h(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=l,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function c(){}function p(e){return null==e?c:function(){return this.querySelector(e)}}function f(){return[]}function d(e){return null==e?f:function(){return this.querySelectorAll(e)}}function v(e){return function(){return this.matches(e)}}function m(e){return function(t){return t.matches(e)}}u.prototype=o.prototype={constructor:u,on:function(e,t){var n,r=this._,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((n=(e=i[a]).type)&&(n=function(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}(r[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++a<s;)if(n=(e=i[a]).type)r[n]=h(r[n],e.name,t);else if(null==t)for(n in r)r[n]=h(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new u(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(r=this._[e],a=0,n=r.length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var g=Array.prototype.find;function y(){return this.firstElementChild}var w=Array.prototype.filter;function S(){return Array.from(this.children)}function x(e){return Array(e.length)}function _(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function T(e,t,n,r,i,a){for(var s,l=0,o=t.length,u=a.length;l<u;++l)(s=t[l])?(s.__data__=a[l],r[l]=s):n[l]=new _(e,a[l]);for(;l<o;++l)(s=t[l])&&(i[l]=s)}function A(e,t,n,r,i,a,s){var l,o,u,h=new Map,c=t.length,p=a.length,f=Array(c);for(l=0;l<c;++l)(o=t[l])&&(f[l]=u=s.call(o,o.__data__,l,t)+"",h.has(u)?i[l]=o:h.set(u,o));for(l=0;l<p;++l)u=s.call(e,a[l],l,a)+"",(o=h.get(u))?(r[l]=o,o.__data__=a[l],h.delete(u)):n[l]=new _(e,a[l]);for(l=0;l<c;++l)(o=t[l])&&h.get(f[l])===o&&(i[l]=o)}function z(e){return e.__data__}function M(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}_.prototype={constructor:_,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var E="http://www.w3.org/1999/xhtml",U={svg:"http://www.w3.org/2000/svg",xhtml:E,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function b(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),U.hasOwnProperty(t)?{space:U[t],local:e}:e}function B(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function R(e,t){return e.style.getPropertyValue(t)||B(e).getComputedStyle(e,null).getPropertyValue(t)}function C(e){return e.trim().split(/^|\s+/)}function N(e){return e.classList||new I(e)}function I(e){this._node=e,this._names=C(e.getAttribute("class")||"")}function D(e,t){for(var n=N(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function P(e,t){for(var n=N(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function F(){this.textContent=""}function L(){this.innerHTML=""}function G(){this.nextSibling&&this.parentNode.appendChild(this)}function H(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function O(e){var t=b(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===E&&t.documentElement.namespaceURI===E?t.createElement(e):t.createElementNS(n,e)}})(t)}function k(){return null}function V(){var e=this.parentNode;e&&e.removeChild(this)}function W(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function K(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function X(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)(n=t[r],e.type&&n.type!==e.type||n.name!==e.name)?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Y(e,t,n){return function(){var r,i=this.__on,a=function(e){t.call(this,e,this.__data__)};if(i){for(var s=0,l=i.length;s<l;++s)if((r=i[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=t;return}}this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(r):this.__on=[r]}}function Z(e,t,n){var r=B(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}I.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var j=[null];function q(e,t){this._groups=e,this._parents=t}function Q(){return new q([[document.documentElement]],j)}q.prototype=Q.prototype={constructor:q,select:function(e){"function"!=typeof e&&(e=p(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a,s,l=t[i],o=l.length,u=r[i]=Array(o),h=0;h<o;++h)(a=l[h])&&(s=e.call(a,a.__data__,h,l))&&("__data__"in a&&(s.__data__=a.__data__),u[h]=s);return new q(r,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=d(e);for(var n=this._groups,r=n.length,i=[],a=[],s=0;s<r;++s)for(var l,o=n[s],u=o.length,h=0;h<u;++h)(l=o[h])&&(i.push(e.call(l,l.__data__,h,o)),a.push(l));return new q(i,a)},selectChild:function(e){var t;return this.select(null==e?y:(t="function"==typeof e?e:m(e),function(){return g.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?S:(t="function"==typeof e?e:m(e),function(){return w.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=v(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a,s=t[i],l=s.length,o=r[i]=[],u=0;u<l;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&o.push(a);return new q(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,z);var n=t?A:T,r=this._parents,i=this._groups;"function"!=typeof e&&(y=e,e=function(){return y});for(var a=i.length,s=Array(a),l=Array(a),o=Array(a),u=0;u<a;++u){var h=r[u],c=i[u],p=c.length,f="object"==typeof(g=e.call(h,h&&h.__data__,u,r))&&"length"in g?g:Array.from(g),d=f.length,v=l[u]=Array(d),m=s[u]=Array(d);n(h,c,v,m,o[u]=Array(p),f,t);for(var g,y,w,S,x=0,_=0;x<d;++x)if(w=v[x]){for(x>=_&&(_=x+1);!(S=m[_])&&++_<d;);w._next=S||null}}return(s=new q(s,r))._enter=l,s._exit=o,s},enter:function(){return new q(this._enter||this._groups.map(x),this._parents)},exit:function(){return new q(this._exit||this._groups.map(x),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,s=Math.min(i,a),l=Array(i),o=0;o<s;++o)for(var u,h=n[o],c=r[o],p=h.length,f=l[o]=Array(p),d=0;d<p;++d)(u=h[d]||c[d])&&(f[d]=u);for(;o<i;++o)l[o]=n[o];return new q(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,s=i[a];--a>=0;)(r=i[a])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=M);for(var n=this._groups,r=n.length,i=Array(r),a=0;a<r;++a){for(var s,l=n[a],o=l.length,u=i[a]=Array(o),h=0;h<o;++h)(s=l[h])&&(u[h]=s);u.sort(t)}return new q(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],s=0,l=a.length;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a);return this},attr:function(e,t){var n=b(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):R(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=C(e+"");if(arguments.length<2){for(var r=N(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?D:P)(this,e)}}:t?function(e){return function(){D(this,e)}}:function(e){return function(){P(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?F:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?L:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(G)},lower:function(){return this.each(H)},append:function(e){var t="function"==typeof e?e:O(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:O(e),r=null==t?k:"function"==typeof t?t:p(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(V)},clone:function(e){return this.select(e?K:W)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),s=a.length;if(arguments.length<2){var l=this.node().__on;if(l){for(var o,u=0,h=l.length;u<h;++u)for(r=0,o=l[u];r<s;++r)if((i=a[r]).type===o.type&&i.name===o.name)return o.value}return}for(r=0,l=t?Y:X;r<s;++r)this.each(l(a[r],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return Z(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return Z(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],a=0,s=i.length;a<s;++a)(r=i[a])&&(yield r)}},a("bi4KR");var J,$,ee=0,et=0,en=0,er=0,ei=0,ea=0,es="object"==typeof performance&&performance.now?performance:Date,el="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function eo(){return ei||(el(eu),ei=es.now()+ea)}function eu(){ei=0}function eh(){this._call=this._time=this._next=null}function ec(e,t,n){var r=new eh;return r.restart(e,t,n),r}function ep(){ei=(er=es.now())+ea,ee=et=0;try{!function(){eo(),++ee;for(var e,t=J;t;)(e=ei-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ee}()}finally{ee=0,function(){for(var e,t,n=J,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:J=t);$=e,ed(r)}(),ei=0}}function ef(){var e=es.now(),t=e-er;t>1e3&&(ea-=t,er=e)}function ed(e){!ee&&(et&&(et=clearTimeout(et)),e-ei>24?(e<1/0&&(et=setTimeout(ep,e-es.now()-ea)),en&&(en=clearInterval(en))):(en||(er=es.now(),en=setInterval(ef,1e3)),ee=1,el(ep)))}function ev(e,t,n){var r=new eh;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}eh.prototype=ec.prototype={constructor:eh,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?eo():+n)+(null==t?0:+t),this._next||$===this||($?$._next=this:J=this,$=this),this._call=e,this._time=n,ed()},stop:function(){this._call&&(this._call=null,this._time=1/0,ed())}};var em=o("start","end","cancel","interrupt"),eg=[];function ey(e,t,n,r,i,a){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(o){var u,h,c,p;if(1!==n.state)return l();for(u in i)if((p=i[u]).name===n.name){if(3===p.state)return ev(a);4===p.state?(p.state=6,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[u]):+u<t&&(p.state=6,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[u])}if(ev(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(u=0,n.state=3,r=Array(c=n.tween.length),h=-1;u<c;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=p);r.length=h+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),a=-1,s=r.length;++a<s;)r[a].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=ec(function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:i,on:em,tween:eg,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function ew(e,t){var n=ex(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function eS(e,t){var n=ex(e,t);if(n.state>3)throw Error("too late; already running");return n}function ex(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}var e_=a("gnkFs"),eT=180/Math.PI,eA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ez(e,t,n,r,i,a){var s,l,o;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(o=e*n+t*r)&&(n-=e*o,r-=t*o),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,o/=l),e*r<t*n&&(e=-e,t=-t,o=-o,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*eT,skewX:Math.atan(o)*eT,scaleX:s,scaleY:l}}function eM(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,s){var l,o,u,h,c=[],p=[];return a=e(a),s=e(s),!function(e,r,i,a,s,l){if(e!==i||r!==a){var o=s.push("translate(",null,t,null,n);l.push({i:o-4,x:(0,e_.default)(e,i)},{i:o-2,x:(0,e_.default)(r,a)})}else(i||a)&&s.push("translate("+i+t+a+n)}(a.translateX,a.translateY,s.translateX,s.translateY,c,p),(l=a.rotate)!==(o=s.rotate)?(l-o>180?o+=360:o-l>180&&(l+=360),p.push({i:c.push(i(c)+"rotate(",null,r)-2,x:(0,e_.default)(l,o)})):o&&c.push(i(c)+"rotate("+o+r),(u=a.skewX)!==(h=s.skewX)?p.push({i:c.push(i(c)+"skewX(",null,r)-2,x:(0,e_.default)(u,h)}):h&&c.push(i(c)+"skewX("+h+r),!function(e,t,n,r,a,s){if(e!==n||t!==r){var l=a.push(i(a)+"scale(",null,",",null,")");s.push({i:l-4,x:(0,e_.default)(e,n)},{i:l-2,x:(0,e_.default)(t,r)})}else(1!==n||1!==r)&&a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,c,p),a=s=null,function(e){for(var t,n=-1,r=p.length;++n<r;)c[(t=p[n]).i]=t.x(e);return c.join("")}}}var eE=eM(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?eA:ez(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),eU=eM(function(e){return null==e?eA:(t||(t=document.createElementNS("http://www.w3.org/2000/svg","g")),t.setAttribute("transform",e),e=t.transform.baseVal.consolidate())?ez((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):eA},", ",")",")");function eb(e,t,n){var r=e._id;return e.each(function(){var e=eS(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return ex(e,r).value[t]}}var eB=a("bYoiY"),e_=a("gnkFs"),eR=a("jUrtA"),eC=a("aPLyh");function eN(e,t){var n;return("number"==typeof t?(0,e_.default):t instanceof(0,eB.default)?(0,eR.default):(n=(0,eB.default)(t))?(t=n,eR.default):(0,eC.default))(e,t)}var eI=Q.prototype.constructor;function eD(e){return function(){this.style.removeProperty(e)}}var eP=0;function eF(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}var eL=Q.prototype;eF.prototype=(function(e){return Q().transition(e)}).prototype={constructor:eF,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=p(e));for(var r=this._groups,i=r.length,a=Array(i),s=0;s<i;++s)for(var l,o,u=r[s],h=u.length,c=a[s]=Array(h),f=0;f<h;++f)(l=u[f])&&(o=e.call(l,l.__data__,f,u))&&("__data__"in l&&(o.__data__=l.__data__),c[f]=o,ey(c[f],t,n,f,c,ex(l,n)));return new eF(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=d(e));for(var r=this._groups,i=r.length,a=[],s=[],l=0;l<i;++l)for(var o,u=r[l],h=u.length,c=0;c<h;++c)if(o=u[c]){for(var p,f=e.call(o,o.__data__,c,u),v=ex(o,n),m=0,g=f.length;m<g;++m)(p=f[m])&&ey(p,t,n,m,f,v);a.push(f),s.push(o)}return new eF(a,s,t,n)},selectChild:eL.selectChild,selectChildren:eL.selectChildren,filter:function(e){"function"!=typeof e&&(e=v(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a,s=t[i],l=s.length,o=r[i]=[],u=0;u<l;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&o.push(a);return new eF(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),s=Array(r),l=0;l<a;++l)for(var o,u=t[l],h=n[l],c=u.length,p=s[l]=Array(c),f=0;f<c;++f)(o=u[f]||h[f])&&(p[f]=o);for(;l<r;++l)s[l]=t[l];return new eF(s,this._parents,this._name,this._id)},selection:function(){return new eI(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++eP,r=this._groups,i=r.length,a=0;a<i;++a)for(var s,l=r[a],o=l.length,u=0;u<o;++u)if(s=l[u]){var h=ex(s,t);ey(s,e,n,u,l,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new eF(r,this._parents,e,n)},call:eL.call,nodes:eL.nodes,node:eL.node,size:eL.size,empty:eL.empty,each:eL.each,on:function(e,t){var n,r,i,a=this._id;return arguments.length<2?ex(this.node(),a).on.on(e):this.each((i=(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?ew:eS,function(){var s=i(this,a),l=s.on;l!==n&&(r=(n=l).copy()).on(e,t),s.on=r}))},attr:function(e,t){var n=b(e),r="transform"===n?eU:eN;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,i,a;return function(){var s,l,o=n(this);return null==o?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local))===(l=o+"")?null:s===r&&l===i?a:(i=l,a=t(r=s,o))}}:function(e,t,n){var r,i,a;return function(){var s,l,o=n(this);return null==o?void this.removeAttribute(e):(s=this.getAttribute(e))===(l=o+"")?null:s===r&&l===i?a:(i=l,a=t(r=s,o))}})(n,r,eb(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,i,a=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===a?null:s===r?i:i=t(r=s,n)}}:function(e,t,n){var r,i,a=n+"";return function(){var s=this.getAttribute(e);return s===a?null:s===r?i:i=t(r=s,n)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var r=b(e);return this.tween(n,(r.local?function(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t){this.setAttributeNS(e.space,e.local,i.call(this,t))}),n}return i._value=t,i}:function(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t){this.setAttribute(e,i.call(this,t))}),n}return i._value=t,i})(r,t))},style:function(e,t,n){var r,i,a,s,l,o,u,h,c,p,f,d,v,m,g,y,w,S,x,_,T,A="transform"==(e+="")?eE:eN;return null==t?this.styleTween(e,(r=e,function(){var e=R(this,r),t=(this.style.removeProperty(r),R(this,r));return e===t?null:e===i&&t===a?s:s=A(i=e,a=t)})).on("end.style."+e,eD(e)):"function"==typeof t?this.styleTween(e,(l=e,o=eb(this,"style."+e,t),function(){var e=R(this,l),t=o(this),n=t+"";return null==t&&(this.style.removeProperty(l),n=t=R(this,l)),e===n?null:e===u&&n===h?c:(h=n,c=A(u=e,t))})).each((p=this._id,w="end."+(y="style."+(f=e)),function(){var e=eS(this,p),t=e.on,n=null==e.value[y]?g||(g=eD(f)):void 0;(t!==d||m!==n)&&(v=(d=t).copy()).on(w,m=n),e.on=v})):this.styleTween(e,(S=e,T=t+"",function(){var e=R(this,S);return e===T?null:e===x?_:_=A(x=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw Error();return this.tween(r,function(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t){this.style.setProperty(e,a.call(this,t),n)}),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=eb(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){this.textContent=r.call(this,e)}),t}return r._value=e,r}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=ex(this.node(),n).tween,a=0,s=i.length;a<s;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var i=eS(this,e),a=i.tween;if(a!==n){r=n=a;for(var s=0,l=r.length;s<l;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}}i.tween=r}}:function(e,t,n){var r,i;if("function"!=typeof n)throw Error();return function(){var a=eS(this,e),s=a.tween;if(s!==r){i=(r=s).slice();for(var l={name:t,value:n},o=0,u=i.length;o<u;++o)if(i[o].name===t){i[o]=l;break}o===u&&i.push(l)}a.tween=i}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){ew(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){ew(this,e).delay=t}})(t,e)):ex(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eS(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){eS(this,e).duration=t}})(t,e)):ex(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){eS(this,e).ease=t}}(t,e)):ex(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();eS(this,t).ease=n}))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var l={value:s},o={value:function(){0==--i&&a()}};n.each(function(){var n=eS(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(o)),n.on=t}),0===i&&a()})},[Symbol.iterator]:eL[Symbol.iterator]};var eG={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};Q.prototype.interrupt=function(e){return this.each(function(){!function(e,t){var n,r,i,a=e.__transition,s=!0;if(a){for(i in t=null==t?null:t+"",a){if((n=a[i]).name!==t){s=!1;continue}r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]}s&&delete e.__transition}}(this,e)})},Q.prototype.transition=function(e){var t,n;e instanceof eF?(t=e._id,e=e._name):(t=++eP,(n=eG).time=eo(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s,l=r[a],o=l.length,u=0;u<o;++u)(s=l[u])&&ey(s,e,t,u,l,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}(s,t));return new eF(r,this._parents,e,t)};const{abs:eH,max:eO,min:ek}=Math;function eV(e){return{type:e}}function eW(e){return((e=Math.exp(e))+1/e)/2}function eK(e,t,n){this.k=e,this.x=t,this.y=n}["w","e"].map(eV),["n","s"].map(eV),["n","w","e","s","nw","ne","sw","se"].map(eV),function e(t,n,r){function i(e,i){var a,s,l=e[0],o=e[1],u=e[2],h=i[0],c=i[1],p=i[2],f=h-l,d=c-o,v=f*f+d*d;if(v<1e-12)s=Math.log(p/u)/t,a=function(e){return[l+e*f,o+e*d,u*Math.exp(t*e*s)]};else{var m=Math.sqrt(v),g=(p*p-u*u+r*v)/(2*u*n*m),y=(p*p-u*u-r*v)/(2*p*n*m),w=Math.log(Math.sqrt(g*g+1)-g);s=(Math.log(Math.sqrt(y*y+1)-y)-w)/t,a=function(e){var r,i,a=e*s,h=eW(w),c=u/(n*m)*(h*(((r=Math.exp(2*(r=t*a+w)))-1)/(r+1))-((i=Math.exp(i=w))-1/i)/2);return[l+c*f,o+c*d,u*h/eW(t*a+w)]}}return a.duration=1e3*s*t/Math.SQRT2,a}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4),eK.prototype={constructor:eK,scale:function(e){return 1===e?this:new eK(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new eK(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new eK(1,0,0),eK.prototype;var eX=a("ilwiq"),eY=a("1UFcf"),eX=a("ilwiq"),eZ="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}";eX.ShaderMaterial,eX.ShaderMaterial;var ej={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},eq="srgb",eQ="srgb-linear",eJ={NONE:0,DEPTH:1,CONVOLUTION:2},e$={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},e0=Number((0,eX.REVISION).replace(/\D+/g,"")),e2=e0>=152,e1=/* @__PURE__ */new Map([[eX.LinearEncoding,eQ],[eX.sRGBEncoding,eq]]),e3=/* @__PURE__ */new Map([[eQ,eX.LinearEncoding],[eq,eX.sRGBEncoding]]);function e4(e){return null===e?null:e2?e.outputColorSpace:e1.get(e.outputEncoding)}function e5(e,t){null!==e&&(e2?e.colorSpace=t:e.encoding=e3.get(t))}function e6(e){return e0<154?e.replace("colorspace_fragment","encodings_fragment"):e}eX.ShaderMaterial,eX.ShaderMaterial;var e8=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],e7=class extends eX.ShaderMaterial{constructor(e=new eX.Vector4){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new eX.Uniform(null),texelSize:new eX.Uniform(new eX.Vector4),scale:new eX.Uniform(1),kernel:new eX.Uniform(0)},blending:eX.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.fragmentShader=e6(this.fragmentShader),this.setTexelSize(e.x,e.y),this.kernelSize=2}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return e8[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,.5*e,.5*t)}setSize(e,t){let n=1/e,r=1/t;this.uniforms.texelSize.value.set(n,r,.5*n,.5*r)}},e9=class extends eX.ShaderMaterial{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new eX.Uniform(null),opacity:new eX.Uniform(1)},blending:eX.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <colorspace_fragment>\n#include <dithering_fragment>\n}",vertexShader:eZ}),this.fragmentShader=e6(this.fragmentShader)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}};eX.ShaderMaterial,eX.ShaderMaterial,eX.ShaderMaterial,eX.ShaderMaterial;var te=class extends eX.ShaderMaterial{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new eX.Uniform(null),texelSize:new eX.Uniform(new eX.Vector2)},blending:eX.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.fragmentShader=e6(this.fragmentShader)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};eX.ShaderMaterial;var tt=class extends eX.ShaderMaterial{constructor(e,t,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:(0,eX.REVISION).replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new eX.Uniform(null),depthBuffer:new eX.Uniform(null),resolution:new eX.Uniform(new eX.Vector2),texelSize:new eX.Uniform(new eX.Vector2),cameraNear:new eX.Uniform(.3),cameraFar:new eX.Uniform(1e3),aspect:new eX.Uniform(1),time:new eX.Uniform(0)},blending:eX.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),e&&this.setShaderParts(e),t&&this.setDefines(t),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=eX.BasicDepthPacking){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <colorspace_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(e$.FRAGMENT_HEAD,e.get(e$.FRAGMENT_HEAD)||"").replace(e$.FRAGMENT_MAIN_UV,e.get(e$.FRAGMENT_MAIN_UV)||"").replace(e$.FRAGMENT_MAIN_IMAGE,e.get(e$.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}".replace(e$.VERTEX_HEAD,e.get(e$.VERTEX_HEAD)||"").replace(e$.VERTEX_MAIN_SUPPORT,e.get(e$.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=e6(this.fragmentShader),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){for(let t of(this.extensions={},e))this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof eX.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}static get Section(){return e$}};eX.ShaderMaterial,eX.ShaderMaterial;var tn=class extends eX.ShaderMaterial{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:(0,eX.REVISION).replace(/\D+/g,"")},uniforms:{inputBuffer:new eX.Uniform(null),threshold:new eX.Uniform(0),smoothing:new eX.Uniform(1),range:new eX.Uniform(null)},blending:eX.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l)*l;\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:eZ}),this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return null!==this.luminanceRange}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}};eX.ShaderMaterial,eX.ShaderMaterial,eX.ShaderMaterial,eX.ShaderMaterial;var tr=class extends eX.ShaderMaterial{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new eX.Uniform(null),supportBuffer:new eX.Uniform(null),texelSize:new eX.Uniform(new eX.Vector2),radius:new eX.Uniform(.85)},blending:eX.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.fragmentShader=e6(this.fragmentShader)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},ti=/* @__PURE__ */new eX.Camera,ta=null,ts=class e{constructor(e="Pass",t=new eX.Scene,n=ti){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.fullscreenMaterial;null!==t&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:((t=new eX.Mesh(function(){if(null===ta){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(ta=new eX.BufferGeometry).setAttribute?(ta.setAttribute("position",new eX.BufferAttribute(e,3)),ta.setAttribute("uv",new eX.BufferAttribute(t,2))):(ta.addAttribute("position",new eX.BufferAttribute(e,3)),ta.addAttribute("uv",new eX.BufferAttribute(t,2)))}return ta}(),e)).frustumCulled=!1,null===this.scene&&(this.scene=new eX.Scene),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=eX.BasicDepthPacking){}render(e,t,n,r,i){throw Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(let t of Object.keys(this)){let n=this[t];(n instanceof eX.WebGLRenderTarget||n instanceof eX.Material||n instanceof eX.Texture||n instanceof e)&&this[t].dispose()}}},tl=class extends ts{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new e9,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new eX.WebGLRenderTarget(1,1,{minFilter:eX.LinearFilter,magFilter:eX.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==eX.UnsignedByteType?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e4(e)===eq&&e5(this.renderTarget.texture,eq))}},to=class extends ts{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,r,i){let a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},tu=/* @__PURE__ */new eX.Color,th=class extends ts{constructor(e=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,n){this.color=e,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,n,r,i){let a=this.overrideClearColor,s=this.overrideClearAlpha,l=e.getClearAlpha(),o=null!==a,u=s>=0;o?(e.getClearColor(tu),e.setClearColor(a,u?s:l)):u&&e.setClearAlpha(s),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),o?e.setClearColor(tu,l):u&&e.setClearAlpha(l)}},tc=class extends ts{constructor(e,t,n=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new th,this.overrideMaterialManager=null===n?null:new t_(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new t_(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,n,r,i){let a=this.scene,s=this.camera,l=this.selection,o=s.layers.mask,u=a.background,h=e.shadowMap.autoUpdate,c=this.renderToScreen?null:t;null!==l&&s.layers.set(l.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(c),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,a,s):e.render(a,s),s.layers.mask=o,a.background=u,e.shadowMap.autoUpdate=h}};function tp(e,t,n){for(let r of t){let t="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),i=RegExp("([^\\.])(\\b"+r+"\\b)","g");for(let e of n.entries())null!==e[1]&&n.set(e[0],e[1].replace(i,t))}}new Float32Array([255/256/16777216,255/256/65536,255/256/256,255/256]);var tf=class extends ts{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new tt(null,null,null,e),this.listener=e=>this.handleEvent(e),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(let t of this.effects)t.mainScene=e}set mainCamera(e){for(let t of(this.fullscreenMaterial.copyCameraSettings(e),this.effects))t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(let e of this.effects)e.removeEventListener("change",this.listener);for(let t of(this.effects=e.sort((e,t)=>t.attributes-e.attributes),this.effects))t.addEventListener("change",this.listener)}updateMaterial(){let e=new tS,t=0;for(let n of this.effects)if(n.blendMode.blendFunction===ej.DST)e.attributes|=n.getAttributes()&eJ.DEPTH;else if((e.attributes&n.getAttributes()&eJ.CONVOLUTION)!=0)throw Error(`Convolution effects cannot be merged (${n.name})`);else!function(e,t,n){let r=t.getFragmentShader(),i=t.getVertexShader(),a=void 0!==r&&/mainImage/.test(r),s=void 0!==r&&/mainUv/.test(r);if(n.attributes|=t.getAttributes(),void 0===r)throw Error(`Missing fragment shader (${t.name})`);if(s&&(n.attributes&eJ.CONVOLUTION)!=0)throw Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(a||s){let l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,o=n.shaderParts,u=o.get(e$.FRAGMENT_HEAD)||"",h=o.get(e$.FRAGMENT_MAIN_UV)||"",c=o.get(e$.FRAGMENT_MAIN_IMAGE)||"",p=o.get(e$.VERTEX_HEAD)||"",f=o.get(e$.VERTEX_MAIN_SUPPORT)||"",d=/* @__PURE__ */new Set,v=/* @__PURE__ */new Set;if(s&&(h+=`	${e}MainUv(UV);
`,n.uvTransformation=!0),null!==i&&/mainSupport/.test(i)){for(let t of(f+=`	${e}MainSupport(`+(/mainSupport *\([\w\s]*?uv\s*?\)/.test(i)?"vUv);\n":");\n"),i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g)))for(let e of t[1].split(/\s*,\s*/))n.varyings.add(e),d.add(e),v.add(e);for(let e of i.matchAll(l))v.add(e[1])}for(let e of r.matchAll(l))v.add(e[1]);for(let e of t.defines.keys())v.add(e.replace(/\([\w\s,]*\)/g,""));for(let e of t.uniforms.keys())v.add(e);v.delete("while"),v.delete("for"),v.delete("if"),t.uniforms.forEach((t,r)=>n.uniforms.set(e+r.charAt(0).toUpperCase()+r.slice(1),t)),t.defines.forEach((t,r)=>n.defines.set(e+r.charAt(0).toUpperCase()+r.slice(1),t));let m=/* @__PURE__ */new Map([["fragment",r],["vertex",i]]);tp(e,v,n.defines),tp(e,v,m),r=m.get("fragment"),i=m.get("vertex");let g=t.blendMode;if(n.blendModes.set(g.blendFunction,g),a){null!==t.inputColorSpace&&t.inputColorSpace!==n.colorSpace&&(c+=t.inputColorSpace===eq?"color0 = LinearTosRGB(color0);\n	":"color0 = sRGBToLinear(color0);\n	"),""!==t.outputColorSpace?n.colorSpace=t.outputColorSpace:null!==t.inputColorSpace&&(n.colorSpace=t.inputColorSpace),c+=`${e}MainImage(color0, UV, `,(n.attributes&eJ.DEPTH)!=0&&/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/.test(r)&&(c+="depth, ",n.readDepth=!0),c+="color1);\n	";let i=e+"BlendOpacity";n.uniforms.set(i,g.opacity),c+=`color0 = blend${g.blendFunction}(color0, color1, ${i});

	`,u+=`uniform float ${i};

`}if(u+=r+"\n",null!==i&&(p+=i+"\n"),o.set(e$.FRAGMENT_HEAD,u),o.set(e$.FRAGMENT_MAIN_UV,h),o.set(e$.FRAGMENT_MAIN_IMAGE,c),o.set(e$.VERTEX_HEAD,p),o.set(e$.VERTEX_MAIN_SUPPORT,f),null!==t.extensions)for(let e of t.extensions)n.extensions.add(e)}else throw Error(`Could not find mainImage or mainUv function (${t.name})`)}("e"+t++,n,e);let n=e.shaderParts.get(e$.FRAGMENT_HEAD),r=e.shaderParts.get(e$.FRAGMENT_MAIN_IMAGE),i=e.shaderParts.get(e$.FRAGMENT_MAIN_UV),a=/\bblend\b/g;for(let t of e.blendModes.values())n+=t.getShaderCode().replace(a,`blend${t.blendFunction}`)+"\n";for(let[t,a]of((e.attributes&eJ.DEPTH)!=0?(e.readDepth&&(r="float depth = readDepth(UV);\n\n	"+r),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,e.colorSpace===eq&&(r+="color0 = sRGBToLinear(color0);\n	"),e.uvTransformation?(i="vec2 transformedUv = vUv;\n"+i,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(e$.FRAGMENT_HEAD,n),e.shaderParts.set(e$.FRAGMENT_MAIN_IMAGE,r),e.shaderParts.set(e$.FRAGMENT_MAIN_UV,i),e.shaderParts))null!==a&&e.shaderParts.set(t,a.trim().replace(/^#/,"\n#"));this.skipRendering=0===t,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=eX.BasicDepthPacking){for(let n of(this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t,this.effects))n.setDepthTexture(e,t)}render(e,t,n,r,i){for(let n of this.effects)n.update(e,t,r);if(!this.skipRendering||this.renderToScreen){let i=this.fullscreenMaterial;i.inputBuffer=t.texture,i.time+=r*this.timeScale,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}setSize(e,t){for(let n of(this.fullscreenMaterial.setSize(e,t),this.effects))n.setSize(e,t)}initialize(e,t,n){for(let r of(this.renderer=e,this.effects))r.initialize(e,t,n);this.updateMaterial(),void 0!==n&&n!==eX.UnsignedByteType&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){for(let e of(super.dispose(),this.effects))e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){"change"===e.type&&this.recompile()}},td=class extends ts{constructor({kernelSize:e=2,resolutionScale:t=.5,width:n=tT.AUTO_SIZE,height:r=tT.AUTO_SIZE,resolutionX:i=n,resolutionY:a=r}={}){super("KawaseBlurPass"),this.renderTargetA=new eX.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let s=this.resolution=new tT(this,i,a,t);s.addEventListener("change",e=>this.setSize(s.baseWidth,s.baseHeight)),this._blurMaterial=new e7,this._blurMaterial.kernelSize=e,this.copyMaterial=new e9}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){let a=this.scene,s=this.camera,l=this.renderTargetA,o=this.renderTargetB,u=this.blurMaterial,h=u.kernelSequence,c=t;this.fullscreenMaterial=u;for(let t=0,n=h.length;t<n;++t){let n=(1&t)==0?l:o;u.kernel=h[t],u.inputBuffer=c.texture,e.setRenderTarget(n),e.render(a,s),c=n}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=c.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(a,s)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t);let r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==eX.UnsignedByteType?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e4(e)===eq&&(e5(this.renderTargetA.texture,eq),e5(this.renderTargetB.texture,eq)))}static get AUTO_SIZE(){return tT.AUTO_SIZE}},tv=class extends ts{constructor({renderTarget:e,luminanceRange:t,colorOutput:n,resolutionScale:r=1,width:i=tT.AUTO_SIZE,height:a=tT.AUTO_SIZE,resolutionX:s=i,resolutionY:l=a}={}){super("LuminancePass"),this.fullscreenMaterial=new tn(n,t),this.needsSwap=!1,this.renderTarget=e,void 0===this.renderTarget&&(this.renderTarget=new eX.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");let o=this.resolution=new tT(this,s,l,r);o.addEventListener("change",e=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}initialize(e,t,n){void 0!==n&&n!==eX.UnsignedByteType&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},tm=class extends ts{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new th(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,n,r,i){let a=e.getContext(),s=e.state.buffers,l=this.scene,o=this.camera,u=this.clearPass,h=this.inverted?0:1;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.stencil.setFunc(a.ALWAYS,h,4294967295),s.stencil.setClear(1-h),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,n))),this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(t),e.render(l,o),e.setRenderTarget(n)),e.render(l,o),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(a.EQUAL,1,4294967295),s.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.stencil.setLocked(!0)}},tg=class extends ts{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new eX.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new te,this.upsamplingMaterial=new tr,this.resolution=new eX.Vector2}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){let t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<e;++n){let e=t.clone();e.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(e)}this.upsamplingMipmaps.push(t);for(let n=1,r=e-1;n<r;++n){let e=t.clone();e.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(e)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,n,r,i){let{scene:a,camera:s}=this,{downsamplingMaterial:l,upsamplingMaterial:o}=this,{downsamplingMipmaps:u,upsamplingMipmaps:h}=this,c=t;this.fullscreenMaterial=l;for(let t=0,n=u.length;t<n;++t){let n=u[t];l.setSize(c.width,c.height),l.inputBuffer=c.texture,e.setRenderTarget(n),e.render(a,s),c=n}this.fullscreenMaterial=o;for(let t=h.length-1;t>=0;--t){let n=h[t];o.setSize(c.width,c.height),o.inputBuffer=c.texture,o.supportBuffer=u[t].texture,e.setRenderTarget(n),e.render(a,s),c=n}}setSize(e,t){let n=this.resolution;n.set(e,t);let r=n.width,i=n.height;for(let e=0,t=this.downsamplingMipmaps.length;e<t;++e)r=Math.round(.5*r),i=Math.round(.5*i),this.downsamplingMipmaps[e].setSize(r,i),e<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[e].setSize(r,i)}initialize(e,t,n){if(void 0!==n){let t=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(let e of t)e.texture.type=n;if(n!==eX.UnsignedByteType)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(e4(e)===eq)for(let e of t)e5(e.texture,eq)}}dispose(){for(let e of(super.dispose(),this.downsamplingMipmaps.concat(this.upsamplingMipmaps)))e.dispose()}},ty=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){"undefined"!=typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return .001*this._delta}get fixedDelta(){return .001*this._fixedDelta}set fixedDelta(e){this._fixedDelta=1e3*e}get elapsed(){return .001*this._elapsed}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==e?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},tw=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new tl,this.depthTexture=null,this.passes=[],this.timer=new ty,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){let t=e.getSize(new eX.Vector2),n=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;for(let i of(r===eX.UnsignedByteType&&e4(e)===eq&&(e5(this.inputBuffer.texture,eq),e5(this.outputBuffer.texture,eq),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height),this.passes))i.initialize(e,n,r)}}replaceRenderer(e,t=!0){let n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(e),t&&null!==r&&(r.removeChild(n.domElement),r.appendChild(e.domElement)),n}createDepthTexture(){let e=this.depthTexture=new eX.DepthTexture;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=eX.DepthStencilFormat,e.type=eX.UnsignedInt248Type):e.type=eX.UnsignedIntType,e}deleteDepthTexture(){if(null!==this.depthTexture)for(let e of(this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose(),this.passes))e.setDepthTexture(null)}createBuffer(e,t,n,r){let i=this.renderer,a=null===i?new eX.Vector2:i.getDrawingBufferSize(new eX.Vector2),s={minFilter:eX.LinearFilter,magFilter:eX.LinearFilter,stencilBuffer:t,depthBuffer:e,type:n},l=new eX.WebGLRenderTarget(a.width,a.height,s);return r>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=r),n===eX.UnsignedByteType&&e4(i)===eq&&e5(l.texture,eq),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(let t of this.passes)t.mainScene=e}setMainCamera(e){for(let t of this.passes)t.mainCamera=e}addPass(e,t){let n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new eX.Vector2),a=r.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(i.width,i.height),e.initialize(r,a,s),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture){if(null===this.depthTexture){let t=this.createDepthTexture();for(e of n)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}}removePass(e){let t=this.passes,n=t.indexOf(e);-1!==n&&t.splice(n,1).length>0&&(null===this.depthTexture||t.reduce((e,t)=>e||t.needsDepthTexture,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture()),this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0)))}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t,n,r;let i=this.renderer,a=this.copyPass,s=this.inputBuffer,l=this.outputBuffer,o=!1;for(let u of(void 0===e&&(this.timer.update(),e=this.timer.delta),this.passes))u.enabled&&(u.render(i,s,l,e,o),u.needsSwap&&(o&&(a.renderToScreen=u.renderToScreen,t=i.getContext(),(n=i.state.buffers.stencil).setFunc(t.NOTEQUAL,1,4294967295),a.render(i,s,l,e,o),n.setFunc(t.EQUAL,1,4294967295)),r=s,s=l,l=r),u instanceof tm?o=!0:u instanceof to&&(o=!1))}setSize(e,t,n){let r=this.renderer,i=r.getSize(new eX.Vector2);(void 0===e||void 0===t)&&(e=i.width,t=i.height),(i.width!==e||i.height!==t)&&r.setSize(e,t,n);let a=r.getDrawingBufferSize(new eX.Vector2);for(let e of(this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height),this.passes))e.setSize(a.width,a.height)}reset(){let e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(let e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},tS=class{constructor(){this.shaderParts=/* @__PURE__ */new Map([[e$.FRAGMENT_HEAD,null],[e$.FRAGMENT_MAIN_UV,null],[e$.FRAGMENT_MAIN_IMAGE,null],[e$.VERTEX_HEAD,null],[e$.VERTEX_MAIN_SUPPORT,null]]),this.defines=/* @__PURE__ */new Map,this.uniforms=/* @__PURE__ */new Map,this.blendModes=/* @__PURE__ */new Map,this.extensions=/* @__PURE__ */new Set,this.attributes=eJ.NONE,this.varyings=/* @__PURE__ */new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=eQ}},tx=!1,t_=class{constructor(e=null){this.originalMaterials=/* @__PURE__ */new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case eX.DoubleSide:t=this.materialsFlatShadedDoubleSide;break;case eX.BackSide:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case eX.DoubleSide:t=this.materialsDoubleSide;break;case eX.BackSide:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof eX.ShaderMaterial))return e.clone();let t=e.uniforms,n=/* @__PURE__ */new Map;for(let e in t){let r=t[e].value;r.isRenderTargetTexture&&(t[e].value=null,n.set(e,r))}let r=e.clone();for(let e of n)t[e[0]].value=e[1],r.uniforms[e[0]].value=e[1];return r}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){let t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(let n of t)n.uniforms=Object.assign({},e.uniforms),n.side=eX.FrontSide;t[2].skinning=!0,this.materialsBackSide=t.map(t=>{let n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.side=eX.BackSide,n}),this.materialsDoubleSide=t.map(t=>{let n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.side=eX.DoubleSide,n}),this.materialsFlatShaded=t.map(t=>{let n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=t.map(t=>{let n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=eX.BackSide,n}),this.materialsFlatShadedDoubleSide=t.map(t=>{let n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=eX.DoubleSide,n})}}render(e,t,n){let r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,tx){let r=this.originalMaterials;for(let i of(this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n),r))i[0].material=i[1];this.meshCount!==r.size&&r.clear()}else{let r=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=r}e.shadowMap.enabled=r}disposeMaterials(){if(null!==this.material)for(let e of this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide))e.dispose()}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return tx}static set workaroundEnabled(e){tx=e}},tT=class extends eX.EventDispatcher{constructor(e,t=-1,n=-1,r=1){super(),this.resizable=e,this.baseSize=new eX.Vector2(1,1),this.preferredSize=new eX.Vector2(t,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new eX.Vector2,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){let e=this.baseSize,t=this.preferredSize,n=this.effectiveSize,r=this.scale;-1!==t.width?n.width=t.width:-1!==t.height?n.width=Math.round(t.height*(e.width/Math.max(e.height,1))):n.width=Math.round(e.width*r),-1!==t.height?n.height=t.height:-1!==t.width?n.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):n.height=Math.round(e.height*r)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(-1),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.baseSize.width!==e||this.baseSize.height!==t)&&(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferredSize.width!==e||this.preferredSize.height!==t)&&(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return -1}},tA=/* @__PURE__ */new Map([[ej.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}"],[ej.ALPHA,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}"],[ej.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}"],[ej.COLOR,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[ej.COLOR_BURN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}"],[ej.COLOR_DODGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}"],[ej.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}"],[ej.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}"],[ej.DIVIDE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}"],[ej.DST,null],[ej.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}"],[ej.HARD_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}"],[ej.HARD_MIX,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}"],[ej.HUE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}"],[ej.INVERT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}"],[ej.INVERT_RGB,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}"],[ej.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}"],[ej.LINEAR_BURN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}"],[ej.LINEAR_DODGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}"],[ej.LINEAR_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}"],[ej.LUMINOSITY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[ej.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}"],[ej.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}"],[ej.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[ej.OVERLAY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}"],[ej.PIN_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}"],[ej.REFLECT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}"],[ej.SATURATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[ej.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}"],[ej.SOFT_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}"],[ej.SRC,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[ej.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}"],[ej.VIVID_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}"]]),tz=class extends eX.EventDispatcher{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new eX.Uniform(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return tA.get(this.blendFunction)}},tM=class extends eX.EventDispatcher{constructor(e,t,{attributes:n=eJ.NONE,blendFunction:r=ej.NORMAL,defines:i=/* @__PURE__ */new Map,uniforms:a=/* @__PURE__ */new Map,extensions:s=null,vertexShader:l=null}={}){super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=l,this.defines=i,this.uniforms=a,this.extensions=s,this.blendMode=new tz(r),this.blendMode.addEventListener("change",e=>this.setChanged()),this._inputColorSpace=eQ,this._outputColorSpace=""}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=eX.BasicDepthPacking){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(let e of Object.keys(this)){let t=this[e];(t instanceof eX.WebGLRenderTarget||t instanceof eX.Material||t instanceof eX.Texture||t instanceof ts)&&this[e].dispose()}}},tE=class extends tM{constructor({blendFunction:e=ej.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:n=.025,mipmapBlur:r=!1,intensity:i=1,radius:a=.85,levels:s=8,kernelSize:l=3,resolutionScale:o=.5,width:u=tT.AUTO_SIZE,height:h=tT.AUTO_SIZE,resolutionX:c=u,resolutionY:p=h}={}){super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}",{blendFunction:e,uniforms:/* @__PURE__ */new Map([["map",new eX.Uniform(null)],["intensity",new eX.Uniform(i)]])}),this.renderTarget=new eX.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new td({kernelSize:l}),this.luminancePass=new tv({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new tg,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=a,this.mipmapBlurPass.levels=s,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;let f=this.resolution=new tT(this,c,p,o);f.addEventListener("change",e=>this.setSize(f.baseWidth,f.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,n){let r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,i.renderTarget):this.blurPass.render(e,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,r)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,n){this.blurPass.initialize(e,t,n),this.luminancePass.initialize(e,t,n),this.mipmapBlurPass.initialize(e,t,n),void 0!==n&&(this.renderTarget.texture.type=n,e4(e)===eq&&e5(this.renderTarget.texture,eq))}};function tU(e,t,n){let r=document.createElement("canvas"),i=r.getContext("2d");if(r.width=e,r.height=t,n instanceof Image)i.drawImage(n,0,0);else{let r=i.createImageData(e,t);r.data.set(n),i.putImageData(r,0,0)}return r}function tb(e,t,n,r){var i;return(i=e+(t-e)*.75)+(n+(r-n)*.75-i)*.875}eX.Data3DTexture,new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]),tb(0,0,0,0),new Float32Array([0,0,0,0]),tb(0,0,0,1),new Float32Array([0,0,0,1]),tb(0,0,1,0),new Float32Array([0,0,1,0]),tb(0,0,1,1),new Float32Array([0,0,1,1]),tb(0,1,0,0),new Float32Array([0,1,0,0]),tb(0,1,0,1),new Float32Array([0,1,0,1]),tb(0,1,1,0),new Float32Array([0,1,1,0]),tb(0,1,1,1),new Float32Array([0,1,1,1]),tb(1,0,0,0),new Float32Array([1,0,0,0]),tb(1,0,0,1),new Float32Array([1,0,0,1]),tb(1,0,1,0),new Float32Array([1,0,1,0]),tb(1,0,1,1),new Float32Array([1,0,1,1]),tb(1,1,0,0),new Float32Array([1,1,0,0]),tb(1,1,0,1),new Float32Array([1,1,0,1]),tb(1,1,1,0),new Float32Array([1,1,1,0]),tb(1,1,1,1),new Float32Array([1,1,1,1]),eX.DataTexture,eX.Loader,eX.Loader,eX.Loader;var tB={};tB=JSON.parse('[{"country":"India","size":18.85,"alpha2":"IN","alpha3":"IND","numeric":356,"lat":20,"lng":77,"color":"white"},{"country":"China","size":5.07,"alpha2":"CN","alpha3":"CHN","numeric":156,"lat":35,"lng":105,"color":"white"},{"country":"United States","size":0.89,"alpha2":"US","alpha3":"USA","numeric":840,"lat":38,"lng":-97,"color":"white"},{"country":"Indonesia","size":14.53,"alpha2":"ID","alpha3":"IDN","numeric":360,"lat":-5,"lng":120,"color":"white"},{"country":"Pakistan","size":3.5,"alpha2":"PK","alpha3":"PAK","numeric":586,"lat":30,"lng":70,"color":"white"},{"country":"Nigeria","size":2.28,"alpha2":"NG","alpha3":"NGA","numeric":566,"lat":10,"lng":8,"color":"white"},{"country":"Brazil","size":13.04,"alpha2":"BR","alpha3":"BRA","numeric":76,"lat":-10,"lng":-55,"color":"white"},{"country":"Bangladesh","size":56.36,"alpha2":"BD","alpha3":"BGD","numeric":50,"lat":24,"lng":90,"color":"white"},{"country":"Russia","size":0.15},{"country":"Ethiopia","size":12.9,"alpha2":"ET","alpha3":"ETH","numeric":231,"lat":8,"lng":38,"color":"white"},{"country":"Mexico","size":6.56,"alpha2":"MX","alpha3":"MEX","numeric":484,"lat":23,"lng":-102,"color":"white"},{"country":"Japan","size":0.2,"alpha2":"JP","alpha3":"JPN","numeric":392,"lat":36,"lng":138,"color":"white"},{"country":"Philippines","size":5,"alpha2":"PH","alpha3":"PHL","numeric":608,"lat":13,"lng":122,"color":"white"},{"country":"Egypt","size":3.93,"alpha2":"EG","alpha3":"EGY","numeric":818,"lat":27,"lng":30,"color":"white"},{"country":"DR Congo","size":11.52},{"country":"Vietnam","size":0.12},{"country":"Iran","size":2.11},{"country":"Turkey","size":0.92,"alpha2":"TR","alpha3":"TUR","numeric":792,"lat":39,"lng":35,"color":"white"},{"country":"Germany","size":0.09,"alpha2":"DE","alpha3":"DEU","numeric":276,"lat":51,"lng":9,"color":"white"},{"country":"Thailand","size":0.99,"alpha2":"TH","alpha3":"THA","numeric":764,"lat":15,"lng":100,"color":"white"},{"country":"Tanzania","size":15.37},{"country":"United Kingdom","size":0.09,"alpha2":"GB","alpha3":"GBR","numeric":826,"lat":54,"lng":-2,"color":"white"},{"country":"France","size":2.86,"alpha2":"FR","alpha3":"FRA","numeric":250,"lat":46,"lng":2,"color":"white"},{"country":"South Africa","size":4.45,"alpha2":"ZA","alpha3":"ZAF","numeric":710,"lat":-29,"lng":24,"color":"white"},{"country":"Italy","size":0.03,"alpha2":"IT","alpha3":"ITA","numeric":380,"lat":42.8333,"lng":12.8333,"color":"white"},{"country":"Kenya","size":15.4,"alpha2":"KE","alpha3":"KEN","numeric":404,"lat":1,"lng":38,"color":"white"},{"country":"Myanmar","size":3.31,"alpha2":"MM","alpha3":"MMR","numeric":104,"lat":22,"lng":98,"color":"white"},{"country":"Colombia","size":7.41,"alpha2":"CO","alpha3":"COL","numeric":170,"lat":4,"lng":-72,"color":"white"},{"country":"South Korea","size":0.17},{"country":"Uganda","size":13.11,"alpha2":"UG","alpha3":"UGA","numeric":800,"lat":1,"lng":32,"color":"white"},{"country":"Sudan","size":2.35,"alpha2":"SD","alpha3":"SDN","numeric":736,"lat":15,"lng":30,"color":"white"},{"country":"Spain","size":0.23,"alpha2":"ES","alpha3":"ESP","numeric":724,"lat":40,"lng":-4,"color":"white"},{"country":"Iraq","size":1.77,"alpha2":"IQ","alpha3":"IRQ","numeric":368,"lat":33,"lng":44,"color":"white"},{"country":"Algeria","size":2.05,"alpha2":"DZ","alpha3":"DZA","numeric":12,"lat":28,"lng":3,"color":"white"},{"country":"Argentina","size":4.05,"alpha2":"AR","alpha3":"ARG","numeric":32,"lat":-34,"lng":-64,"color":"white"},{"country":"Afghanistan","size":11.04,"alpha2":"AF","alpha3":"AFG","numeric":4,"lat":33,"lng":65,"color":"white"},{"country":"Poland","size":0.08,"alpha2":"PL","alpha3":"POL","numeric":616,"lat":52,"lng":20,"color":"white"},{"country":"Canada","size":0.53,"alpha2":"CA","alpha3":"CAN","numeric":124,"lat":60,"lng":-95,"color":"white"},{"country":"Morocco","size":2.04,"alpha2":"MA","alpha3":"MAR","numeric":504,"lat":32,"lng":-5,"color":"white"},{"country":"Ukraine","size":0.13,"alpha2":"UA","alpha3":"UKR","numeric":804,"lat":49,"lng":32,"color":"white"},{"country":"Angola","size":101.32,"alpha2":"AO","alpha3":"AGO","numeric":24,"lat":-12.5,"lng":18.5,"color":"white"},{"country":"Saudi Arabia","size":0.61,"alpha2":"SA","alpha3":"SAU","numeric":682,"lat":25,"lng":45,"color":"white"},{"country":"Uzbekistan","size":0.04,"alpha2":"UZ","alpha3":"UZB","numeric":860,"lat":41,"lng":64,"color":"white"},{"country":"Yemen","size":4.47,"alpha2":"YE","alpha3":"YEM","numeric":887,"lat":15,"lng":48,"color":"white"},{"country":"Mozambique","size":17.43,"alpha2":"MZ","alpha3":"MOZ","numeric":508,"lat":-18.25,"lng":35,"color":"white"},{"country":"Ghana","size":9.56,"alpha2":"GH","alpha3":"GHA","numeric":288,"lat":8,"lng":-2,"color":"white"},{"country":"Peru","size":3.55,"alpha2":"PE","alpha3":"PER","numeric":604,"lat":-10,"lng":-76,"color":"white"},{"country":"Malaysia","size":1.63,"alpha2":"MY","alpha3":"MYS","numeric":458,"lat":2.5,"lng":112.5,"color":"white"},{"country":"Nepal","size":5.22,"alpha2":"NP","alpha3":"NPL","numeric":524,"lat":28,"lng":84,"color":"white"},{"country":"Madagascar","size":28.32,"alpha2":"MG","alpha3":"MDG","numeric":450,"lat":-20,"lng":47,"color":"white"},{"country":"Ivory Coast","size":4.65},{"country":"Venezuela","size":2.02},{"country":"Cameroon","size":14.66,"alpha2":"CM","alpha3":"CMR","numeric":120,"lat":6,"lng":12,"color":"white"},{"country":"Niger","size":7.81,"alpha2":"NE","alpha3":"NER","numeric":562,"lat":16,"lng":8,"color":"white"},{"country":"Australia","size":0.27,"alpha2":"AU","alpha3":"AUS","numeric":36,"lat":-27,"lng":133,"color":"white"},{"country":"North Korea","size":1.65},{"country":"Syria","size":0.66},{"country":"Mali","size":57.15,"alpha2":"ML","alpha3":"MLI","numeric":466,"lat":17,"lng":-4,"color":"white"},{"country":"Taiwan","size":0.29},{"country":"Burkina Faso","size":16.16,"alpha2":"BF","alpha3":"BFA","numeric":854,"lat":13,"lng":-2,"color":"white"},{"country":"Sri Lanka","size":0.77,"alpha2":"LK","alpha3":"LKA","numeric":144,"lat":7,"lng":81,"color":"white"},{"country":"Malawi","size":17.98,"alpha2":"MW","alpha3":"MWI","numeric":454,"lat":-13.5,"lng":34,"color":"white"},{"country":"Zambia","size":17.69,"alpha2":"ZM","alpha3":"ZMB","numeric":894,"lat":-15,"lng":30,"color":"white"},{"country":"Kazakhstan","size":0.5,"alpha2":"KZ","alpha3":"KAZ","numeric":398,"lat":48,"lng":68,"color":"white"},{"country":"Chile","size":2.1,"alpha2":"CL","alpha3":"CHL","numeric":152,"lat":-30,"lng":-71,"color":"white"},{"country":"Romania","size":0.14,"alpha2":"RO","alpha3":"ROU","numeric":642,"lat":46,"lng":25,"color":"white"},{"country":"Chad","size":16.39,"alpha2":"TD","alpha3":"TCD","numeric":148,"lat":15,"lng":19,"color":"white"},{"country":"Somalia","size":46.73,"alpha2":"SO","alpha3":"SOM","numeric":706,"lat":10,"lng":49,"color":"white"},{"country":"Ecuador","size":15.45,"alpha2":"EC","alpha3":"ECU","numeric":218,"lat":-2,"lng":-77.5,"color":"white"},{"country":"Guatemala","size":18.63,"alpha2":"GT","alpha3":"GTM","numeric":320,"lat":15.5,"lng":-90.25,"color":"white"},{"country":"Senegal","size":3.68,"alpha2":"SN","alpha3":"SEN","numeric":686,"lat":14,"lng":-14,"color":"white"},{"country":"Netherlands","size":0.4,"alpha2":"NL","alpha3":"NLD","numeric":528,"lat":52.5,"lng":5.75,"color":"white"},{"country":"Cambodia","size":50.19,"alpha2":"KH","alpha3":"KHM","numeric":116,"lat":13,"lng":105,"color":"white"},{"country":"Zimbabwe","size":27.38,"alpha2":"ZW","alpha3":"ZWE","numeric":716,"lat":-20,"lng":30,"color":"white"},{"country":"Guinea","size":12.21,"alpha2":"GN","alpha3":"GIN","numeric":324,"lat":11,"lng":-10,"color":"white"},{"country":"Rwanda","size":13.52,"alpha2":"RW","alpha3":"RWA","numeric":646,"lat":-2,"lng":30,"color":"white"},{"country":"Benin","size":37.71,"alpha2":"BJ","alpha3":"BEN","numeric":204,"lat":9.5,"lng":2.25,"color":"white"},{"country":"Burundi","size":24.46,"alpha2":"BI","alpha3":"BDI","numeric":108,"lat":-3.5,"lng":30,"color":"white"},{"country":"Bolivia","size":31.79},{"country":"Tunisia","size":0.23,"alpha2":"TN","alpha3":"TUN","numeric":788,"lat":34,"lng":9,"color":"white"},{"country":"Haiti","size":8.23,"alpha2":"HT","alpha3":"HTI","numeric":332,"lat":19,"lng":-72.4167,"color":"white"},{"country":"Belgium","size":0.33,"alpha2":"BE","alpha3":"BEL","numeric":56,"lat":50.8333,"lng":4,"color":"white"},{"country":"Dominican Republic","size":16.24,"alpha2":"DO","alpha3":"DOM","numeric":214,"lat":19,"lng":-70.6667,"color":"white"},{"country":"Jordan","size":0.83,"alpha2":"JO","alpha3":"JOR","numeric":400,"lat":31,"lng":36,"color":"white"},{"country":"South Sudan","size":25.51},{"country":"Cuba","size":0.52,"alpha2":"CU","alpha3":"CUB","numeric":192,"lat":21.5,"lng":-80,"color":"white"},{"country":"Honduras","size":7.48,"alpha2":"HN","alpha3":"HND","numeric":340,"lat":15,"lng":-86.5,"color":"white"},{"country":"Sweden","size":0.39,"alpha2":"SE","alpha3":"SWE","numeric":752,"lat":62,"lng":15,"color":"white"},{"country":"Papua New Guinea","size":4.54,"alpha2":"PG","alpha3":"PNG","numeric":598,"lat":-6,"lng":147,"color":"white"},{"country":"Czech Republic","size":0.56,"alpha2":"CZ","alpha3":"CZE","numeric":203,"lat":49.75,"lng":15.5,"color":"white"},{"country":"Azerbaijan","size":1.58,"alpha2":"AZ","alpha3":"AZE","numeric":31,"lat":40.5,"lng":47.5,"color":"white"},{"country":"Tajikistan","size":0.09,"alpha2":"TJ","alpha3":"TJK","numeric":762,"lat":39,"lng":71,"color":"white"},{"country":"Greece","size":0.06,"alpha2":"GR","alpha3":"GRC","numeric":300,"lat":39,"lng":22,"color":"white"},{"country":"Portugal","size":0.42,"alpha2":"PT","alpha3":"PRT","numeric":620,"lat":39.5,"lng":-8,"color":"white"},{"country":"Hungary","size":0.04,"alpha2":"HU","alpha3":"HUN","numeric":348,"lat":47,"lng":20,"color":"white"},{"country":"United Arab Emirates","size":0.12,"alpha2":"AE","alpha3":"ARE","numeric":784,"lat":24,"lng":54,"color":"white"},{"country":"Belarus","size":0.38,"alpha2":"BY","alpha3":"BLR","numeric":112,"lat":53,"lng":28,"color":"white"},{"country":"Israel","size":0.16,"alpha2":"IL","alpha3":"ISR","numeric":376,"lat":31.5,"lng":34.75,"color":"white"},{"country":"Togo","size":5.38,"alpha2":"TG","alpha3":"TGO","numeric":768,"lat":8,"lng":1.1667,"color":"white"},{"country":"Sierra Leone","size":13.12,"alpha2":"SL","alpha3":"SLE","numeric":694,"lat":8.5,"lng":-11.5,"color":"white"},{"country":"Austria","size":0.01,"alpha2":"AT","alpha3":"AUT","numeric":40,"lat":47.3333,"lng":13.3333,"color":"white"},{"country":"Switzerland","size":0.31,"alpha2":"CH","alpha3":"CHE","numeric":756,"lat":47,"lng":8,"color":"white"},{"country":"Laos","size":4.76},{"country":"Nicaragua","size":2.96,"alpha2":"NI","alpha3":"NIC","numeric":558,"lat":13,"lng":-85,"color":"white"},{"country":"Serbia","size":0.13,"alpha2":"RS","alpha3":"SRB","numeric":688,"lat":44,"lng":21,"color":"white"},{"country":"Libya","size":0.57},{"country":"Paraguay","size":5.45,"alpha2":"PY","alpha3":"PRY","numeric":600,"lat":-23,"lng":-58,"color":"white"},{"country":"Kyrgyzstan","size":0.58,"alpha2":"KG","alpha3":"KGZ","numeric":417,"lat":41,"lng":75,"color":"white"},{"country":"Bulgaria","size":0.02,"alpha2":"BG","alpha3":"BGR","numeric":100,"lat":43,"lng":25,"color":"white"},{"country":"Turkmenistan","size":0.12,"alpha2":"TM","alpha3":"TKM","numeric":795,"lat":40,"lng":60,"color":"white"},{"country":"El Salvador","size":9.72,"alpha2":"SV","alpha3":"SLV","numeric":222,"lat":13.8333,"lng":-88.9167,"color":"white"},{"country":"Republic of the Congo","size":10.36},{"country":"Singapore","size":0.17,"alpha2":"SG","alpha3":"SGP","numeric":702,"lat":1.3667,"lng":103.8,"color":"white"},{"country":"Denmark","size":0.08,"alpha2":"DK","alpha3":"DNK","numeric":208,"lat":56,"lng":10,"color":"white"},{"country":"Central African Republic","size":29.51,"alpha2":"CF","alpha3":"CAF","numeric":140,"lat":7,"lng":21,"color":"white"},{"country":"Slovakia","size":0.1,"alpha2":"SK","alpha3":"SVK","numeric":703,"lat":48.6667,"lng":19.5,"color":"white"},{"country":"Finland","size":0.03,"alpha2":"FI","alpha3":"FIN","numeric":246,"lat":64,"lng":26,"color":"white"},{"country":"Liberia","size":11.75,"alpha2":"LR","alpha3":"LBR","numeric":430,"lat":6.5,"lng":-9.5,"color":"white"},{"country":"Norway","size":0.74,"alpha2":"NO","alpha3":"NOR","numeric":578,"lat":62,"lng":10,"color":"white"},{"country":"Palestine","size":0.58},{"country":"New Zealand","size":0.2,"alpha2":"NZ","alpha3":"NZL","numeric":554,"lat":-41,"lng":174,"color":"white"},{"country":"Costa Rica","size":1.4,"alpha2":"CR","alpha3":"CRI","numeric":188,"lat":10,"lng":-84,"color":"white"},{"country":"Lebanon","size":0.51,"alpha2":"LB","alpha3":"LBN","numeric":422,"lat":33.8333,"lng":35.8333,"color":"white"},{"country":"Ireland","size":0.15,"alpha2":"IE","alpha3":"IRL","numeric":372,"lat":53,"lng":-8,"color":"white"},{"country":"Mauritania","size":12.69,"alpha2":"MR","alpha3":"MRT","numeric":478,"lat":20,"lng":-12,"color":"white"},{"country":"Oman","size":0.77,"alpha2":"OM","alpha3":"OMN","numeric":512,"lat":21,"lng":57,"color":"white"},{"country":"Panama","size":2.89,"alpha2":"PA","alpha3":"PAN","numeric":591,"lat":9,"lng":-80,"color":"white"},{"country":"Kuwait","size":0.06,"alpha2":"KW","alpha3":"KWT","numeric":414,"lat":29.3375,"lng":47.6581,"color":"white"},{"country":"Croatia","size":0.01,"alpha2":"HR","alpha3":"HRV","numeric":191,"lat":45.1667,"lng":15.5,"color":"white"},{"country":"Eritrea","size":27.52,"alpha2":"ER","alpha3":"ERI","numeric":232,"lat":15,"lng":39,"color":"white"},{"country":"Georgia","size":0.07,"alpha2":"GE","alpha3":"GEO","numeric":268,"lat":42,"lng":43.5,"color":"white"},{"country":"Mongolia","size":0.12,"alpha2":"MN","alpha3":"MNG","numeric":496,"lat":46,"lng":105,"color":"white"},{"country":"Uruguay","size":1.76,"alpha2":"UY","alpha3":"URY","numeric":858,"lat":-33,"lng":-56,"color":"white"},{"country":"Moldova","size":0.28},{"country":"Puerto Rico","size":1.2,"alpha2":"PR","alpha3":"PRI","numeric":630,"lat":18.25,"lng":-66.5,"color":"white"},{"country":"Bosnia and Herzegovina","size":0.02,"alpha2":"BA","alpha3":"BIH","numeric":70,"lat":44,"lng":18,"color":"white"},{"country":"Gambia","size":8.04,"alpha2":"GM","alpha3":"GMB","numeric":270,"lat":13.4667,"lng":-16.5667,"color":"white"},{"country":"Albania","size":0.9,"alpha2":"AL","alpha3":"ALB","numeric":8,"lat":41,"lng":20,"color":"white"},{"country":"Jamaica","size":8.09,"alpha2":"JM","alpha3":"JAM","numeric":388,"lat":18.25,"lng":-77.5,"color":"white"},{"country":"Armenia","size":0.72,"alpha2":"AM","alpha3":"ARM","numeric":51,"lat":40,"lng":45,"color":"white"},{"country":"Qatar","size":0.37,"alpha2":"QA","alpha3":"QAT","numeric":634,"lat":25.5,"lng":51.25,"color":"white"},{"country":"Botswana","size":15.9,"alpha2":"BW","alpha3":"BWA","numeric":72,"lat":-22,"lng":24,"color":"white"},{"country":"Lithuania","size":0.27,"alpha2":"LT","alpha3":"LTU","numeric":440,"lat":56,"lng":24,"color":"white"},{"country":"Namibia","size":9.39,"alpha2":"NA","alpha3":"NAM","numeric":516,"lat":-22,"lng":17,"color":"white"},{"country":"Gabon","size":6.74,"alpha2":"GA","alpha3":"GAB","numeric":266,"lat":-1,"lng":11.75,"color":"white"},{"country":"Lesotho","size":11.69,"alpha2":"LS","alpha3":"LSO","numeric":426,"lat":-29.5,"lng":28.5,"color":"white"},{"country":"Guinea-Bissau","size":9.37,"alpha2":"GW","alpha3":"GNB","numeric":624,"lat":12,"lng":-15,"color":"white"},{"country":"Slovenia","size":0.06,"alpha2":"SI","alpha3":"SVN","numeric":705,"lat":46,"lng":15,"color":"white"},{"country":"North Macedonia","size":0.1},{"country":"Latvia","size":0.41,"alpha2":"LV","alpha3":"LVA","numeric":428,"lat":57,"lng":25,"color":"white"},{"country":"Equatorial Guinea","size":5.29,"alpha2":"GQ","alpha3":"GNQ","numeric":226,"lat":2,"lng":10,"color":"white"},{"country":"Trinidad and Tobago","size":1.54,"alpha2":"TT","alpha3":"TTO","numeric":780,"lat":11,"lng":-61,"color":"white"},{"country":"Bahrain","size":2.59,"alpha2":"BH","alpha3":"BHR","numeric":48,"lat":26,"lng":50.55,"color":"white"},{"country":"Timor-Leste","size":8.62,"alpha2":"TL","alpha3":"TLS","numeric":626,"lat":-8.55,"lng":125.5167,"color":"white"},{"country":"Estonia","size":0.71,"alpha2":"EE","alpha3":"EST","numeric":233,"lat":59,"lng":26,"color":"white"},{"country":"Mauritius","size":3.11,"alpha2":"MU","alpha3":"MUS","numeric":480,"lat":-20.2833,"lng":57.55,"color":"white"},{"country":"Cyprus","size":0.63,"alpha2":"CY","alpha3":"CYP","numeric":196,"lat":35,"lng":33,"color":"white"},{"country":"Eswatini","size":9.26},{"country":"Djibouti","size":27.07,"alpha2":"DJ","alpha3":"DJI","numeric":262,"lat":11.5,"lng":43,"color":"white"},{"country":"Fiji","size":7.35,"alpha2":"FJ","alpha3":"FJI","numeric":242,"lat":-18,"lng":175,"color":"white"},{"country":"Comoros","size":12.54,"alpha2":"KM","alpha3":"COM","numeric":174,"lat":-12.1667,"lng":44.25,"color":"white"},{"country":"Guyana","size":7.82,"alpha2":"GY","alpha3":"GUY","numeric":328,"lat":5,"lng":-59,"color":"white"},{"country":"Bhutan","size":8.46,"alpha2":"BT","alpha3":"BTN","numeric":64,"lat":27.5,"lng":90.5,"color":"white"},{"country":"Solomon Islands","size":8.38,"alpha2":"SB","alpha3":"SLB","numeric":90,"lat":-8,"lng":159,"color":"white"},{"country":"Luxembourg","size":0.72,"alpha2":"LU","alpha3":"LUX","numeric":442,"lat":49.75,"lng":6.1667,"color":"white"},{"country":"Suriname","size":2.56,"alpha2":"SR","alpha3":"SUR","numeric":740,"lat":4,"lng":-56,"color":"white"},{"country":"Montenegro","size":0.09,"alpha2":"ME","alpha3":"MNE","numeric":499,"lat":42,"lng":19,"color":"white"},{"country":"Cape Verde","size":9.53,"alpha2":"CV","alpha3":"CPV","numeric":132,"lat":16,"lng":-24,"color":"white"},{"country":"Malta","size":0.09,"alpha2":"MT","alpha3":"MLT","numeric":470,"lat":35.8333,"lng":14.5833,"color":"white"},{"country":"Maldives","size":25.71,"alpha2":"MV","alpha3":"MDV","numeric":462,"lat":3.25,"lng":73,"color":"white"},{"country":"Brunei","size":1.38},{"country":"Belize","size":10.02,"alpha2":"BZ","alpha3":"BLZ","numeric":84,"lat":17.25,"lng":-88.75,"color":"white"},{"country":"Bahamas","size":3.34,"alpha2":"BS","alpha3":"BHS","numeric":44,"lat":24.25,"lng":-76,"color":"white"},{"country":"Iceland","size":0.23,"alpha2":"IS","alpha3":"ISL","numeric":352,"lat":65,"lng":-18,"color":"white"},{"country":"Vanuatu","size":8.5,"alpha2":"VU","alpha3":"VUT","numeric":548,"lat":-16,"lng":167,"color":"white"},{"country":"Barbados","size":2.93,"alpha2":"BB","alpha3":"BRB","numeric":52,"lat":13.1667,"lng":-59.5333,"color":"white"},{"country":"Sao Tome and Principe","size":5.83,"alpha2":"ST","alpha3":"STP","numeric":678,"lat":1,"lng":7,"color":"white"},{"country":"Samoa","size":3.7,"alpha2":"WS","alpha3":"WSM","numeric":882,"lat":-13.5833,"lng":-172.3333,"color":"white"},{"country":"Saint Lucia","size":2.86,"alpha2":"LC","alpha3":"LCA","numeric":662,"lat":13.8833,"lng":-61.1333,"color":"white"},{"country":"Guam","size":3.44,"alpha2":"GU","alpha3":"GUM","numeric":316,"lat":13.4667,"lng":144.7833,"color":"white"},{"country":"Kiribati","size":25.24,"alpha2":"KI","alpha3":"KIR","numeric":296,"lat":1.4167,"lng":173,"color":"white"},{"country":"Grenada","size":6.06,"alpha2":"GD","alpha3":"GRD","numeric":308,"lat":12.1167,"lng":-61.6667,"color":"white"},{"country":"Micronesia","size":6.56},{"country":"Tonga","size":4.32,"alpha2":"TO","alpha3":"TON","numeric":776,"lat":-20,"lng":-175,"color":"white"},{"country":"Seychelles","size":1.97,"alpha2":"SC","alpha3":"SYC","numeric":690,"lat":-4.5833,"lng":55.6667,"color":"white"},{"country":"Saint Vincent and the Grenadines","size":6.08,"alpha2":"VC","alpha3":"VCT","numeric":670,"lat":13.25,"lng":-61.2,"color":"white"},{"country":"United States Virgin Islands","size":2.49},{"country":"Antigua and Barbuda","size":5.91,"alpha2":"AG","alpha3":"ATG","numeric":28,"lat":17.05,"lng":-61.8,"color":"white"},{"country":"Andorra","size":0.08,"alpha2":"AD","alpha3":"AND","numeric":20,"lat":42.5,"lng":1.6,"color":"white"},{"country":"Dominica","size":4.86,"alpha2":"DM","alpha3":"DMA","numeric":212,"lat":15.4167,"lng":-61.3333,"color":"white"},{"country":"Bermuda","size":0.8,"alpha2":"BM","alpha3":"BMU","numeric":60,"lat":32.3333,"lng":-64.75,"color":"white"},{"country":"Greenland","size":1.54,"alpha2":"GL","alpha3":"GRL","numeric":304,"lat":72,"lng":-40,"color":"white"},{"country":"Northern Mariana Islands","size":4.15,"alpha2":"MP","alpha3":"MNP","numeric":580,"lat":15.2,"lng":145.75,"color":"white"},{"country":"Saint Kitts and Nevis","size":6.54,"alpha2":"KN","alpha3":"KNA","numeric":659,"lat":17.3333,"lng":-62.75,"color":"white"},{"country":"American Samoa","size":9.79,"alpha2":"AS","alpha3":"ASM","numeric":16,"lat":-14.3333,"lng":-170,"color":"white"},{"country":"Marshall Islands","size":6.01,"alpha2":"MH","alpha3":"MHL","numeric":584,"lat":9,"lng":168,"color":"white"},{"country":"Monaco","size":0.12,"alpha2":"MC","alpha3":"MCO","numeric":492,"lat":43.7333,"lng":7.4,"color":"white"},{"country":"San Marino","size":0.15,"alpha2":"SM","alpha3":"SMR","numeric":674,"lat":43.7667,"lng":12.4167,"color":"white"},{"country":"Palau","size":1.51,"alpha2":"PW","alpha3":"PLW","numeric":585,"lat":7.5,"lng":134.5,"color":"white"},{"country":"Cook Islands","size":0.84,"alpha2":"CK","alpha3":"COK","numeric":184,"lat":-21.2333,"lng":-159.7667,"color":"white"},{"country":"Nauru","size":5.85,"alpha2":"NR","alpha3":"NRU","numeric":520,"lat":-0.5333,"lng":166.9167,"color":"white"},{"country":"Tuvalu","size":5.25,"alpha2":"TV","alpha3":"TUV","numeric":798,"lat":-8,"lng":178,"color":"white"},{"country":"Niue","size":3.95,"alpha2":"NU","alpha3":"NIU","numeric":570,"lat":-19.0333,"lng":-169.8667,"color":"white"},{"country":"Tokelau","size":3.63,"alpha2":"TK","alpha3":"TKL","numeric":772,"lat":-9,"lng":-172,"color":"white"}]'),fetch("https://vasturiano.github.io/three-globe/example/country-polygons/ne_110m_admin_0_countries.geojson").then(e=>e.json()).then(t=>{let n=new(0,s.default)().globeImageUrl("https://static6.depositphotos.com/1137194/623/i/450/depositphotos_6233022-stock-illustration-earth-map-as-brush-illustration.jpg").bumpImageUrl("//unpkg.com/three-globe/example/img/earth-topology.png").polygonsData(t.features.filter(e=>"AQ"!==e.properties.ISO_A2)).polygonCapColor(()=>"rgba(0, 0, 0, 0)").polygonSideColor(()=>"rgba(0, 0, 0, 0)").polygonStrokeColor(()=>"#111").labelsData(/*@__PURE__*/e(tB)).labelText(e=>`${e.country} Deaths: ${e.size}`).labelSize(.5).labelDotRadius(e=>e.size/20).labelColor("color");console.log(/*@__PURE__*/e(tB));let r=new eX.Scene;r.add(n),r.add(new eX.AmbientLight(16777215)),r.add(new eX.DirectionalLight(16777215,1));let i=new eX.WebGLRenderer({powerPreference:"high-performance",antialias:!1,stencil:!1,depth:!1});i.setSize(3*window.innerWidth/4,3*window.innerHeight/4),document.getElementById("globeViz").appendChild(i.domElement);let a=new eX.PerspectiveCamera;a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),a.position.z=300;let l=new eY.TrackballControls(a,i.domElement);l.minDistance=101,l.rotateSpeed=5,l.zoomSpeed=.8;let o=new tw(i);o.addPass(new tc(r,a));let u=new tE;o.addPass(new tf(a,u)),ec(function(e){i.render(r,a)}),function e(){l.update(),o.render(),window.requestAnimationFrame(e)}()}).catch(console.log);
//# sourceMappingURL=spots.cd2a6247.js.map
